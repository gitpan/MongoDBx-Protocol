#!/usr/bin/perl

use strict;
use warnings;

use lib qw(lib);
use MongoDBx::Protocol;
use Tie::IxHash;

my $p = MongoDBx::Protocol->new;
my $msg = $p->insert({
    fullCollectionName => 'test.test',
    documents => [
                  { asdf => 'fdsa' },
                  { a => 'b', b => 'c' },
    ],
});

print $msg; exit;

use IO::Socket::INET;
my $sock = IO::Socket::INET->new(
    PeerAddr => "localhost",
    PeerPort => "27017",
    Proto    => "tcp"
) or die "AAAA: $!";

$sock->print($msg);
sleep(1);

=head

my $c;
sleep(1);
$sock->blocking(0);
my $resp;
while (my $r = $sock->sysread($c, 1)) {
    $resp .= $c;
}
print $resp;#, "\n";

=cut
